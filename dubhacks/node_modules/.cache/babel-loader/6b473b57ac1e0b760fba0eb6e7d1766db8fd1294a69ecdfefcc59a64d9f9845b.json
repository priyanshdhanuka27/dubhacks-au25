{"ast":null,"code":"import axios from 'axios';\nimport { config } from '../config';\nclass AuthService {\n  constructor() {\n    this.baseURL = void 0;\n    this.baseURL = config.api.baseUrl;\n  }\n\n  /**\r\n   * Login using Google ID token (id_token from Google's Identity SDK)\r\n   */\n  async googleLogin(idToken) {\n    try {\n      const response = await axios.post(`${this.baseURL}/auth/google`, {\n        idToken\n      }, {\n        timeout: config.api.timeout,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.data.success && response.data.data) {\n        const authResult = response.data.data;\n        if (authResult.token) {\n          this.storeAuthData(authResult.token, authResult.user);\n        }\n        return authResult;\n      }\n      return {\n        success: false,\n        error: response.data.error || 'Google login failed'\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Google login error:', error);\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.message) {\n        return {\n          success: false,\n          error: error.response.data.message\n        };\n      }\n      return {\n        success: false,\n        error: 'Network error. Please try again.'\n      };\n    }\n  }\n\n  /**\r\n   * Register a new user\r\n   */\n  async register(userData) {\n    try {\n      const response = await axios.post(`${this.baseURL}/auth/register`, {\n        email: userData.email,\n        password: userData.password,\n        firstName: userData.firstName,\n        lastName: userData.lastName,\n        timezone: userData.timezone\n      }, {\n        timeout: config.api.timeout,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.data.success && response.data.data) {\n        const authResult = response.data.data;\n\n        // Store tokens and user data\n        if (authResult.token) {\n          this.storeAuthData(authResult.token, authResult.user);\n        }\n        return authResult;\n      }\n      return {\n        success: false,\n        error: response.data.error || 'Registration failed'\n      };\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Registration error:', error);\n      if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.message) {\n        return {\n          success: false,\n          error: error.response.data.message\n        };\n      }\n      return {\n        success: false,\n        error: 'Network error. Please check your connection and try again.'\n      };\n    }\n  }\n\n  /**\r\n   * Login user with credentials\r\n   */\n  async login(credentials) {\n    try {\n      const response = await axios.post(`${this.baseURL}/auth/login`, credentials, {\n        timeout: config.api.timeout,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.data.success && response.data.data) {\n        const authResult = response.data.data;\n\n        // Store tokens and user data\n        if (authResult.token) {\n          this.storeAuthData(authResult.token, authResult.user);\n        }\n        return authResult;\n      }\n      return {\n        success: false,\n        error: response.data.error || 'Login failed'\n      };\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Login error:', error);\n      if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.message) {\n        return {\n          success: false,\n          error: error.response.data.message\n        };\n      }\n      return {\n        success: false,\n        error: 'Network error. Please check your connection and try again.'\n      };\n    }\n  }\n\n  /**\r\n   * Logout user\r\n   */\n  async logout() {\n    try {\n      const token = this.getStoredToken();\n      if (token) {\n        // Call logout endpoint\n        await axios.delete(`${this.baseURL}/auth/logout`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          },\n          timeout: config.api.timeout\n        });\n      }\n    } catch (error) {\n      console.error('Logout API error:', error);\n      // Continue with local logout even if API call fails\n    } finally {\n      // Always clear local storage\n      this.clearAuthData();\n    }\n  }\n\n  /**\r\n   * Refresh access token\r\n   */\n  async refreshToken() {\n    try {\n      const refreshToken = this.getStoredRefreshToken();\n      if (!refreshToken) {\n        return {\n          success: false,\n          error: 'No refresh token available'\n        };\n      }\n      const response = await axios.post(`${this.baseURL}/auth/refresh`, {\n        refreshToken\n      }, {\n        timeout: config.api.timeout,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.data.success && response.data.data) {\n        const authResult = response.data.data;\n\n        // Store new tokens and user data\n        if (authResult.token) {\n          this.storeAuthData(authResult.token, authResult.user);\n        }\n        return authResult;\n      }\n\n      // If refresh fails, clear stored data\n      this.clearAuthData();\n      return {\n        success: false,\n        error: response.data.error || 'Token refresh failed'\n      };\n    } catch (error) {\n      console.error('Token refresh error:', error);\n\n      // Clear stored data on refresh failure\n      this.clearAuthData();\n      return {\n        success: false,\n        error: 'Session expired. Please log in again.'\n      };\n    }\n  }\n\n  /**\r\n   * Get current user from storage\r\n   */\n  getCurrentUser() {\n    try {\n      const userData = localStorage.getItem(config.auth.userKey);\n      return userData ? JSON.parse(userData) : null;\n    } catch (error) {\n      console.error('Error getting current user:', error);\n      return null;\n    }\n  }\n\n  /**\r\n   * Get stored access token\r\n   */\n  getStoredToken() {\n    return localStorage.getItem(config.auth.tokenKey);\n  }\n\n  /**\r\n   * Get stored refresh token\r\n   */\n  getStoredRefreshToken() {\n    return localStorage.getItem(config.auth.refreshTokenKey);\n  }\n\n  /**\r\n   * Check if user is authenticated\r\n   */\n  isAuthenticated() {\n    const token = this.getStoredToken();\n    const user = this.getCurrentUser();\n    return !!(token && user);\n  }\n\n  /**\r\n   * Store authentication data in localStorage\r\n   */\n  storeAuthData(authToken, user) {\n    try {\n      localStorage.setItem(config.auth.tokenKey, authToken.token);\n      localStorage.setItem(config.auth.refreshTokenKey, authToken.refreshToken);\n      if (user) {\n        localStorage.setItem(config.auth.userKey, JSON.stringify(user));\n      }\n    } catch (error) {\n      console.error('Error storing auth data:', error);\n    }\n  }\n\n  /**\r\n   * Clear authentication data from localStorage\r\n   */\n  clearAuthData() {\n    try {\n      localStorage.removeItem(config.auth.tokenKey);\n      localStorage.removeItem(config.auth.refreshTokenKey);\n      localStorage.removeItem(config.auth.userKey);\n    } catch (error) {\n      console.error('Error clearing auth data:', error);\n    }\n  }\n\n  /**\r\n   * Validate registration data\r\n   */\n  validateRegistrationData(data) {\n    const errors = [];\n\n    // Email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!data.email || !emailRegex.test(data.email)) {\n      errors.push('Please enter a valid email address');\n    }\n\n    // Password validation\n    if (!data.password || data.password.length < 8) {\n      errors.push('Password must be at least 8 characters long');\n    }\n    if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(data.password)) {\n      errors.push('Password must contain at least one uppercase letter, one lowercase letter, and one number');\n    }\n\n    // Confirm password validation\n    if (data.password !== data.confirmPassword) {\n      errors.push('Passwords do not match');\n    }\n\n    // Name validation\n    if (!data.firstName || data.firstName.trim().length < 2) {\n      errors.push('First name must be at least 2 characters long');\n    }\n    if (!data.lastName || data.lastName.trim().length < 2) {\n      errors.push('Last name must be at least 2 characters long');\n    }\n\n    // Timezone validation\n    if (!data.timezone) {\n      errors.push('Please select a timezone');\n    }\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n\n  /**\r\n   * Validate login credentials\r\n   */\n  validateLoginCredentials(credentials) {\n    const errors = [];\n    if (!credentials.email) {\n      errors.push('Email is required');\n    }\n    if (!credentials.password) {\n      errors.push('Password is required');\n    }\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n}\nexport const authService = new AuthService();","map":{"version":3,"names":["axios","config","AuthService","constructor","baseURL","api","baseUrl","googleLogin","idToken","response","post","timeout","headers","data","success","authResult","token","storeAuthData","user","error","_error$response","_error$response$data","console","message","register","userData","email","password","firstName","lastName","timezone","_error$response2","_error$response2$data","login","credentials","_error$response3","_error$response3$data","logout","getStoredToken","delete","clearAuthData","refreshToken","getStoredRefreshToken","getCurrentUser","localStorage","getItem","auth","userKey","JSON","parse","tokenKey","refreshTokenKey","isAuthenticated","authToken","setItem","stringify","removeItem","validateRegistrationData","errors","emailRegex","test","push","length","confirmPassword","trim","isValid","validateLoginCredentials","authService"],"sources":["C:/Users/priya/OneDrive - UW/Hackathons/auDubhacks25/dubhacks/src/services/authService.ts"],"sourcesContent":["import axios, { AxiosResponse } from 'axios';\r\nimport { config } from '../config';\r\nimport { \r\n  LoginCredentials, \r\n  RegisterData, \r\n  User, \r\n  ApiResponse \r\n} from '../types';\r\n\r\nexport interface AuthToken {\r\n  token: string;\r\n  refreshToken: string;\r\n  expiresAt: Date;\r\n  userId: string;\r\n}\r\n\r\nexport interface AuthResult {\r\n  success: boolean;\r\n  user?: Omit<User, 'passwordHash'>;\r\n  token?: AuthToken;\r\n  error?: string;\r\n}\r\n\r\nclass AuthService {\r\n  private baseURL: string;\r\n\r\n  constructor() {\r\n    this.baseURL = config.api.baseUrl;\r\n  }\r\n\r\n  /**\r\n   * Login using Google ID token (id_token from Google's Identity SDK)\r\n   */\r\n  async googleLogin(idToken: string): Promise<AuthResult> {\r\n    try {\r\n      const response: AxiosResponse<ApiResponse<AuthResult>> = await axios.post(\r\n        `${this.baseURL}/auth/google`,\r\n        { idToken },\r\n        {\r\n          timeout: config.api.timeout,\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data.success && response.data.data) {\r\n        const authResult = response.data.data;\r\n        if (authResult.token) {\r\n          this.storeAuthData(authResult.token, authResult.user);\r\n        }\r\n        return authResult;\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        error: response.data.error || 'Google login failed'\r\n      };\r\n\r\n    } catch (error: any) {\r\n      console.error('Google login error:', error);\r\n      if (error.response?.data?.message) {\r\n        return { success: false, error: error.response.data.message };\r\n      }\r\n      return { success: false, error: 'Network error. Please try again.' };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register a new user\r\n   */\r\n  async register(userData: RegisterData): Promise<AuthResult> {\r\n    try {\r\n      const response: AxiosResponse<ApiResponse<AuthResult>> = await axios.post(\r\n        `${this.baseURL}/auth/register`,\r\n        {\r\n          email: userData.email,\r\n          password: userData.password,\r\n          firstName: userData.firstName,\r\n          lastName: userData.lastName,\r\n          timezone: userData.timezone\r\n        },\r\n        {\r\n          timeout: config.api.timeout,\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data.success && response.data.data) {\r\n        const authResult = response.data.data;\r\n        \r\n        // Store tokens and user data\r\n        if (authResult.token) {\r\n          this.storeAuthData(authResult.token, authResult.user);\r\n        }\r\n        \r\n        return authResult;\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        error: response.data.error || 'Registration failed'\r\n      };\r\n\r\n    } catch (error: any) {\r\n      console.error('Registration error:', error);\r\n      \r\n      if (error.response?.data?.message) {\r\n        return {\r\n          success: false,\r\n          error: error.response.data.message\r\n        };\r\n      }\r\n      \r\n      return {\r\n        success: false,\r\n        error: 'Network error. Please check your connection and try again.'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Login user with credentials\r\n   */\r\n  async login(credentials: LoginCredentials): Promise<AuthResult> {\r\n    try {\r\n      const response: AxiosResponse<ApiResponse<AuthResult>> = await axios.post(\r\n        `${this.baseURL}/auth/login`,\r\n        credentials,\r\n        {\r\n          timeout: config.api.timeout,\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data.success && response.data.data) {\r\n        const authResult = response.data.data;\r\n        \r\n        // Store tokens and user data\r\n        if (authResult.token) {\r\n          this.storeAuthData(authResult.token, authResult.user);\r\n        }\r\n        \r\n        return authResult;\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        error: response.data.error || 'Login failed'\r\n      };\r\n\r\n    } catch (error: any) {\r\n      console.error('Login error:', error);\r\n      \r\n      if (error.response?.data?.message) {\r\n        return {\r\n          success: false,\r\n          error: error.response.data.message\r\n        };\r\n      }\r\n      \r\n      return {\r\n        success: false,\r\n        error: 'Network error. Please check your connection and try again.'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Logout user\r\n   */\r\n  async logout(): Promise<void> {\r\n    try {\r\n      const token = this.getStoredToken();\r\n      \r\n      if (token) {\r\n        // Call logout endpoint\r\n        await axios.delete(`${this.baseURL}/auth/logout`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          timeout: config.api.timeout\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Logout API error:', error);\r\n      // Continue with local logout even if API call fails\r\n    } finally {\r\n      // Always clear local storage\r\n      this.clearAuthData();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh access token\r\n   */\r\n  async refreshToken(): Promise<AuthResult> {\r\n    try {\r\n      const refreshToken = this.getStoredRefreshToken();\r\n      \r\n      if (!refreshToken) {\r\n        return {\r\n          success: false,\r\n          error: 'No refresh token available'\r\n        };\r\n      }\r\n\r\n      const response: AxiosResponse<ApiResponse<AuthResult>> = await axios.post(\r\n        `${this.baseURL}/auth/refresh`,\r\n        { refreshToken },\r\n        {\r\n          timeout: config.api.timeout,\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data.success && response.data.data) {\r\n        const authResult = response.data.data;\r\n        \r\n        // Store new tokens and user data\r\n        if (authResult.token) {\r\n          this.storeAuthData(authResult.token, authResult.user);\r\n        }\r\n        \r\n        return authResult;\r\n      }\r\n\r\n      // If refresh fails, clear stored data\r\n      this.clearAuthData();\r\n      \r\n      return {\r\n        success: false,\r\n        error: response.data.error || 'Token refresh failed'\r\n      };\r\n\r\n    } catch (error: any) {\r\n      console.error('Token refresh error:', error);\r\n      \r\n      // Clear stored data on refresh failure\r\n      this.clearAuthData();\r\n      \r\n      return {\r\n        success: false,\r\n        error: 'Session expired. Please log in again.'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current user from storage\r\n   */\r\n  getCurrentUser(): User | null {\r\n    try {\r\n      const userData = localStorage.getItem(config.auth.userKey);\r\n      return userData ? JSON.parse(userData) : null;\r\n    } catch (error) {\r\n      console.error('Error getting current user:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get stored access token\r\n   */\r\n  getStoredToken(): string | null {\r\n    return localStorage.getItem(config.auth.tokenKey);\r\n  }\r\n\r\n  /**\r\n   * Get stored refresh token\r\n   */\r\n  getStoredRefreshToken(): string | null {\r\n    return localStorage.getItem(config.auth.refreshTokenKey);\r\n  }\r\n\r\n  /**\r\n   * Check if user is authenticated\r\n   */\r\n  isAuthenticated(): boolean {\r\n    const token = this.getStoredToken();\r\n    const user = this.getCurrentUser();\r\n    return !!(token && user);\r\n  }\r\n\r\n  /**\r\n   * Store authentication data in localStorage\r\n   */\r\n  private storeAuthData(authToken: AuthToken, user?: Omit<User, 'passwordHash'>): void {\r\n    try {\r\n      localStorage.setItem(config.auth.tokenKey, authToken.token);\r\n      localStorage.setItem(config.auth.refreshTokenKey, authToken.refreshToken);\r\n      \r\n      if (user) {\r\n        localStorage.setItem(config.auth.userKey, JSON.stringify(user));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error storing auth data:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear authentication data from localStorage\r\n   */\r\n  private clearAuthData(): void {\r\n    try {\r\n      localStorage.removeItem(config.auth.tokenKey);\r\n      localStorage.removeItem(config.auth.refreshTokenKey);\r\n      localStorage.removeItem(config.auth.userKey);\r\n    } catch (error) {\r\n      console.error('Error clearing auth data:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate registration data\r\n   */\r\n  validateRegistrationData(data: RegisterData): { isValid: boolean; errors: string[] } {\r\n    const errors: string[] = [];\r\n\r\n    // Email validation\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!data.email || !emailRegex.test(data.email)) {\r\n      errors.push('Please enter a valid email address');\r\n    }\r\n\r\n    // Password validation\r\n    if (!data.password || data.password.length < 8) {\r\n      errors.push('Password must be at least 8 characters long');\r\n    }\r\n\r\n    if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(data.password)) {\r\n      errors.push('Password must contain at least one uppercase letter, one lowercase letter, and one number');\r\n    }\r\n\r\n    // Confirm password validation\r\n    if (data.password !== data.confirmPassword) {\r\n      errors.push('Passwords do not match');\r\n    }\r\n\r\n    // Name validation\r\n    if (!data.firstName || data.firstName.trim().length < 2) {\r\n      errors.push('First name must be at least 2 characters long');\r\n    }\r\n\r\n    if (!data.lastName || data.lastName.trim().length < 2) {\r\n      errors.push('Last name must be at least 2 characters long');\r\n    }\r\n\r\n    // Timezone validation\r\n    if (!data.timezone) {\r\n      errors.push('Please select a timezone');\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validate login credentials\r\n   */\r\n  validateLoginCredentials(credentials: LoginCredentials): { isValid: boolean; errors: string[] } {\r\n    const errors: string[] = [];\r\n\r\n    if (!credentials.email) {\r\n      errors.push('Email is required');\r\n    }\r\n\r\n    if (!credentials.password) {\r\n      errors.push('Password is required');\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n}\r\n\r\nexport const authService = new AuthService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}