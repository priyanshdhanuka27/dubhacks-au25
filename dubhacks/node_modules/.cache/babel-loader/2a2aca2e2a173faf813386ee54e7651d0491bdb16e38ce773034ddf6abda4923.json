{"ast":null,"code":"import _objectSpread from\"/Users/rishivora/Documents/Coding/Hackathons/dubhacks-au25/dubhacks/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{userService}from'../../services/userService';import{useAuth}from'../../contexts/AuthContext';import UserProfile from'./UserProfile';import UserPreferences from'./UserPreferences';import SavedEvents from'./SavedEvents';import'./UserComponents.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserDashboard=_ref=>{let{onCalendarAdd}=_ref;const{state}=useAuth();const{user}=state;const[activeTab,setActiveTab]=useState('overview');const[completeProfile,setCompleteProfile]=useState(null);const[recommendations,setRecommendations]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const loadDashboardData=useCallback(async()=>{if(!(user!==null&&user!==void 0&&user.userId))return;try{setLoading(true);setError(null);const[profileData,recommendationsData]=await Promise.all([userService.getCompleteUserProfile(user.userId),userService.getPersonalizedRecommendations(user.userId,6)]);setCompleteProfile(profileData);setRecommendations(recommendationsData);}catch(err){setError(err instanceof Error?err.message:'Failed to load dashboard data');}finally{setLoading(false);}},[user===null||user===void 0?void 0:user.userId]);useEffect(()=>{if(user!==null&&user!==void 0&&user.userId){loadDashboardData();}},[user===null||user===void 0?void 0:user.userId,loadDashboardData]);const handleProfileUpdate=profile=>{if(completeProfile){setCompleteProfile(_objectSpread(_objectSpread({},completeProfile),{},{profile}));}};const handlePreferencesUpdate=preferences=>{if(completeProfile){setCompleteProfile(_objectSpread(_objectSpread({},completeProfile),{},{preferences}));}// Reload recommendations when preferences change\nloadRecommendations();};const loadRecommendations=async()=>{if(!(user!==null&&user!==void 0&&user.userId))return;try{const recommendationsData=await userService.getPersonalizedRecommendations(user.userId,6);setRecommendations(recommendationsData);}catch(err){console.error('Failed to reload recommendations:',err);}};const handleEventUnsave=()=>{// Reload dashboard data to update saved events count\nloadDashboardData();};const renderTabContent=()=>{switch(activeTab){case'overview':return renderOverview();case'profile':return/*#__PURE__*/_jsx(UserProfile,{onProfileUpdate:handleProfileUpdate});case'preferences':return/*#__PURE__*/_jsx(UserPreferences,{onPreferencesUpdate:handlePreferencesUpdate});case'saved-events':return/*#__PURE__*/_jsx(SavedEvents,{onEventUnsave:handleEventUnsave,onCalendarAdd:onCalendarAdd});default:return renderOverview();}};const renderOverview=()=>{if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-overview\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:\"Loading dashboard...\"})});}if(!completeProfile){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-overview\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Failed to load profile data\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-overview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome back, \",completeProfile.profile.firstName,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Here's your personalized event dashboard.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:completeProfile.savedEventsCount}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Saved Events\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:completeProfile.preferences.eventCategories.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Preferred Categories\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:completeProfile.preferences.maxDistance}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Max Distance (mi)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon\",children:\"\\u2728\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-number\",children:completeProfile.recentActivity.eventsCreated}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Events Created\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recommended for You\"}),/*#__PURE__*/_jsx(\"button\",{className:\"refresh-button\",onClick:loadRecommendations,title:\"Refresh recommendations\",children:\"\\uD83D\\uDD04\"})]}),recommendations.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"recommendations-grid\",children:recommendations.map(event=>/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:event.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"event-date\",children:[event.startDateTime.toLocaleDateString(),\" at \",event.startDateTime.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"event-location\",children:[event.location.city,\", \",event.location.state]}),/*#__PURE__*/_jsx(\"p\",{className:\"event-category\",children:event.category})]}),/*#__PURE__*/_jsx(\"div\",{className:\"event-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"save-event-button\",onClick:()=>handleSaveEvent(event.eventId),children:\"Save\"})})]},event.eventId))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-recommendations\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No recommendations available. Update your preferences to get personalized suggestions!\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Profile Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),completeProfile.profile.location?\"\".concat(completeProfile.profile.location.city,\", \").concat(completeProfile.profile.location.state):'Not specified']}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Interests:\"}),completeProfile.profile.interests.length>0?completeProfile.profile.interests.slice(0,3).join(', ')+(completeProfile.profile.interests.length>3?'...':''):'None specified']}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price Range:\"}),\"$\",completeProfile.preferences.priceRange.min,\" - $\",completeProfile.preferences.priceRange.max,\" \",completeProfile.preferences.priceRange.currency]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notifications:\"}),completeProfile.preferences.notificationSettings.emailNotifications?'Email enabled':'Email disabled']})]})]})]});};const handleSaveEvent=async eventId=>{if(!(user!==null&&user!==void 0&&user.userId))return;try{await userService.saveEvent(user.userId,eventId);// Reload dashboard data to update saved events count\nloadDashboardData();}catch(err){setError(err instanceof Error?err.message:'Failed to save event');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='overview'?'active':''),onClick:()=>setActiveTab('overview'),children:\"Overview\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='profile'?'active':''),onClick:()=>setActiveTab('profile'),children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='preferences'?'active':''),onClick:()=>setActiveTab('preferences'),children:\"Preferences\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='saved-events'?'active':''),onClick:()=>setActiveTab('saved-events'),children:\"Saved Events\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-content\",children:renderTabContent()})]});};export default UserDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}