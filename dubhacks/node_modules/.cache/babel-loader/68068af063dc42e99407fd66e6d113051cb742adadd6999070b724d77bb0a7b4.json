{"ast":null,"code":"import _objectSpread from\"/Users/rishivora/Documents/Coding/Hackathons/dubhacks-au25/dubhacks/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{userService}from'../../services/userService';import{useAuth}from'../../contexts/AuthContext';import'./UserComponents.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserProfile=_ref=>{var _formData$interests,_formData$location,_formData$location2,_formData$location3,_formData$location4,_formData$location5,_formData$location6,_formData$location6$c,_formData$location7,_formData$location7$c;let{onProfileUpdate}=_ref;const{state}=useAuth();const{user}=state;const[profile,setProfile]=useState(null);const[isEditing,setIsEditing]=useState(false);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[error,setError]=useState(null);const[formData,setFormData]=useState({});const loadProfile=useCallback(async()=>{if(!(user!==null&&user!==void 0&&user.userId))return;try{setLoading(true);setError(null);const profileData=await userService.getUserProfile(user.userId);setProfile(profileData);setFormData(profileData);}catch(err){setError(err instanceof Error?err.message:'Failed to load profile');}finally{setLoading(false);}},[user===null||user===void 0?void 0:user.userId]);useEffect(()=>{if(user!==null&&user!==void 0&&user.userId){loadProfile();}},[user===null||user===void 0?void 0:user.userId,loadProfile]);const handleEdit=()=>{setIsEditing(true);setFormData(profile||{});};const handleCancel=()=>{setIsEditing(false);setFormData(profile||{});setError(null);};const handleSave=async()=>{if(!(user!==null&&user!==void 0&&user.userId)||!formData)return;try{setSaving(true);setError(null);const updatedProfile=await userService.updateUserProfile(user.userId,formData);setProfile(updatedProfile);setIsEditing(false);if(onProfileUpdate){onProfileUpdate(updatedProfile);}}catch(err){setError(err instanceof Error?err.message:'Failed to update profile');}finally{setSaving(false);}};const handleInputChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const handleLocationChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:_objectSpread(_objectSpread({},prev.location),{},{[field]:value})}));};const handleCoordinatesChange=(field,value)=>{const numValue=parseFloat(value);if(isNaN(numValue))return;setFormData(prev=>{var _prev$location;return _objectSpread(_objectSpread({},prev),{},{location:_objectSpread(_objectSpread({},prev.location),{},{coordinates:_objectSpread(_objectSpread({},(_prev$location=prev.location)===null||_prev$location===void 0?void 0:_prev$location.coordinates),{},{[field]:numValue})})});});};const handleInterestsChange=value=>{const interests=value.split(',').map(interest=>interest.trim()).filter(Boolean);handleInputChange('interests',interests);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"user-profile\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:\"Loading profile...\"})});}if(!profile){return/*#__PURE__*/_jsx(\"div\",{className:\"user-profile\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Profile not found\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),!isEditing&&/*#__PURE__*/_jsx(\"button\",{className:\"edit-button\",onClick:handleEdit,children:\"Edit Profile\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.firstName||'',onChange:e=>handleInputChange('firstName',e.target.value),placeholder:\"Enter first name\"}):/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:profile.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.lastName||'',onChange:e=>handleInputChange('lastName',e.target.value),placeholder:\"Enter last name\"}):/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:profile.lastName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Timezone\"}),isEditing?/*#__PURE__*/_jsxs(\"select\",{value:formData.timezone||'',onChange:e=>handleInputChange('timezone',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select timezone\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/New_York\",children:\"Eastern Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Chicago\",children:\"Central Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Denver\",children:\"Mountain Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Los_Angeles\",children:\"Pacific Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Anchorage\",children:\"Alaska Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pacific/Honolulu\",children:\"Hawaii Time\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:profile.timezone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Interests\"}),isEditing?/*#__PURE__*/_jsx(\"textarea\",{value:((_formData$interests=formData.interests)===null||_formData$interests===void 0?void 0:_formData$interests.join(', '))||'',onChange:e=>handleInterestsChange(e.target.value),placeholder:\"Enter interests separated by commas (e.g., music, sports, technology)\",rows:3}):/*#__PURE__*/_jsx(\"div\",{className:\"interests-list\",children:profile.interests.length>0?profile.interests.map((interest,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"interest-tag\",children:interest},index)):/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:\"No interests specified\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Location\"}),isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Venue/Building\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_formData$location=formData.location)===null||_formData$location===void 0?void 0:_formData$location.venue)||'',onChange:e=>handleLocationChange('venue',e.target.value),placeholder:\"Enter venue or building name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_formData$location2=formData.location)===null||_formData$location2===void 0?void 0:_formData$location2.address)||'',onChange:e=>handleLocationChange('address',e.target.value),placeholder:\"Enter street address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_formData$location3=formData.location)===null||_formData$location3===void 0?void 0:_formData$location3.city)||'',onChange:e=>handleLocationChange('city',e.target.value),placeholder:\"Enter city\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"State\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_formData$location4=formData.location)===null||_formData$location4===void 0?void 0:_formData$location4.state)||'',onChange:e=>handleLocationChange('state',e.target.value),placeholder:\"Enter state\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"ZIP Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_formData$location5=formData.location)===null||_formData$location5===void 0?void 0:_formData$location5.zipCode)||'',onChange:e=>handleLocationChange('zipCode',e.target.value),placeholder:\"Enter ZIP code\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Latitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",value:((_formData$location6=formData.location)===null||_formData$location6===void 0?void 0:(_formData$location6$c=_formData$location6.coordinates)===null||_formData$location6$c===void 0?void 0:_formData$location6$c.latitude)||'',onChange:e=>handleCoordinatesChange('latitude',e.target.value),placeholder:\"Enter latitude\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Longitude\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"any\",value:((_formData$location7=formData.location)===null||_formData$location7===void 0?void 0:(_formData$location7$c=_formData$location7.coordinates)===null||_formData$location7$c===void 0?void 0:_formData$location7$c.longitude)||'',onChange:e=>handleCoordinatesChange('longitude',e.target.value),placeholder:\"Enter longitude\"})]})]})]}):/*#__PURE__*/_jsx(_Fragment,{children:profile.location?/*#__PURE__*/_jsxs(\"div\",{className:\"location-display\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"location-line\",children:/*#__PURE__*/_jsx(\"strong\",{children:profile.location.venue})}),/*#__PURE__*/_jsx(\"div\",{className:\"location-line\",children:profile.location.address}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-line\",children:[profile.location.city,\", \",profile.location.state,\" \",profile.location.zipCode]}),profile.location.coordinates&&/*#__PURE__*/_jsxs(\"div\",{className:\"location-line coordinates\",children:[\"Coordinates: \",profile.location.coordinates.latitude.toFixed(6),\", \",profile.location.coordinates.longitude.toFixed(6)]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"profile-value\",children:\"No location specified\"})})]}),isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"save-button\",onClick:handleSave,disabled:saving,children:saving?'Saving...':'Save Changes'}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-button\",onClick:handleCancel,disabled:saving,children:\"Cancel\"})]})]})]});};export default UserProfile;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}