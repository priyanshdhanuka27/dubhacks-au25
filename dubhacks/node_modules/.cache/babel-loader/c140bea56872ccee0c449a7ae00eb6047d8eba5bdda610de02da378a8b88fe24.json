{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{searchService}from'../../services/searchService';import'./SearchComponents.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SearchBar=_ref=>{let{onSearch,loading=false,placeholder='Search for events...',initialQuery='',showSuggestions=true}=_ref;const[query,setQuery]=useState(initialQuery);const[suggestions,setSuggestions]=useState([]);const[showSuggestionsList,setShowSuggestionsList]=useState(false);const[selectedSuggestionIndex,setSelectedSuggestionIndex]=useState(-1);const inputRef=useRef(null);const suggestionsRef=useRef(null);useEffect(()=>{if(showSuggestions&&query.length>=2){const newSuggestions=searchService.getSearchSuggestions(query);setSuggestions(newSuggestions);setShowSuggestionsList(true);}else{setShowSuggestionsList(false);}setSelectedSuggestionIndex(-1);},[query,showSuggestions]);useEffect(()=>{const handleClickOutside=event=>{var _inputRef$current;if(suggestionsRef.current&&!suggestionsRef.current.contains(event.target)&&!((_inputRef$current=inputRef.current)!==null&&_inputRef$current!==void 0&&_inputRef$current.contains(event.target))){setShowSuggestionsList(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const handleSubmit=e=>{e.preventDefault();if(query.trim()){onSearch(query.trim());setShowSuggestionsList(false);}};const handleInputChange=e=>{setQuery(e.target.value);};const handleKeyDown=e=>{if(!showSuggestionsList||suggestions.length===0)return;switch(e.key){case'ArrowDown':e.preventDefault();setSelectedSuggestionIndex(prev=>prev<suggestions.length-1?prev+1:0);break;case'ArrowUp':e.preventDefault();setSelectedSuggestionIndex(prev=>prev>0?prev-1:suggestions.length-1);break;case'Enter':if(selectedSuggestionIndex>=0){e.preventDefault();const selectedSuggestion=suggestions[selectedSuggestionIndex];setQuery(selectedSuggestion);onSearch(selectedSuggestion);setShowSuggestionsList(false);}break;case'Escape':setShowSuggestionsList(false);setSelectedSuggestionIndex(-1);break;}};const handleSuggestionClick=suggestion=>{var _inputRef$current2;setQuery(suggestion);onSearch(suggestion);setShowSuggestionsList(false);(_inputRef$current2=inputRef.current)===null||_inputRef$current2===void 0?void 0:_inputRef$current2.focus();};const handleInputFocus=()=>{if(showSuggestions&&query.length>=2){setShowSuggestionsList(true);}};const clearSearch=()=>{var _inputRef$current3;setQuery('');setShowSuggestionsList(false);(_inputRef$current3=inputRef.current)===null||_inputRef$current3===void 0?void 0:_inputRef$current3.focus();};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar-container\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"search-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-input-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"text\",value:query,onChange:handleInputChange,onKeyDown:handleKeyDown,onFocus:handleInputFocus,placeholder:placeholder,disabled:loading,className:\"search-input\"}),query&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:clearSearch,className:\"clear-search-btn\",title:\"Clear search\",children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!query.trim()||loading,className:\"search-submit-btn\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner small\"}):'Search'})]})}),showSuggestionsList&&suggestions.length>0&&/*#__PURE__*/_jsx(\"div\",{ref:suggestionsRef,className:\"suggestions-list\",children:suggestions.map((suggestion,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"suggestion-item \".concat(index===selectedSuggestionIndex?'selected':''),onClick:()=>handleSuggestionClick(suggestion),onMouseEnter:()=>setSelectedSuggestionIndex(index),children:[/*#__PURE__*/_jsx(\"span\",{className:\"suggestion-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"span\",{className:\"suggestion-text\",children:suggestion})]},index))})]});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}