{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{calendarService}from'../../services/calendarService';import'./SearchComponents.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const CalendarModal=_ref=>{let{event,isOpen,onClose}=_ref;const[calendarLinks,setCalendarLinks]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[downloadStatus,setDownloadStatus]=useState(null);const fetchCalendarLinks=useCallback(async()=>{setLoading(true);setError(null);try{const links=await calendarService.getCalendarLinks(event.eventId);setCalendarLinks(links);}catch(err){setError(err.message||'Failed to generate calendar links');}finally{setLoading(false);}},[event]);useEffect(()=>{if(isOpen&&event){fetchCalendarLinks();}},[isOpen,event,fetchCalendarLinks]);const handleCalendarAction=async type=>{if(!calendarLinks)return;try{setDownloadStatus(\"Opening \".concat(type,\" calendar...\"));if(type==='ics'||type==='apple'){// For .ics files, trigger download\nawait calendarService.downloadICSFile(event.eventId,event.title);setDownloadStatus('Calendar file downloaded successfully!');}else{// For web-based calendars, open in new tab\nwindow.open(calendarLinks[type],'_blank');setDownloadStatus(\"Opened \".concat(type,\" calendar in new tab\"));}// Clear status after 3 seconds\nsetTimeout(()=>{setDownloadStatus(null);},3000);}catch(err){setError(err.message||\"Failed to open \".concat(type,\" calendar\"));}};const formatEventDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'numeric',minute:'2-digit',hour12:true});};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"calendar-modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add to Calendar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:event.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"event-date\",children:[\"\\uD83D\\uDCC5 \",formatEventDate(event.startDateTime)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"event-location\",children:[\"\\uD83D\\uDCCD \",event.location.venue,\", \",event.location.city,\", \",event.location.state]})]}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Generating calendar links...\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-state\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"error-message\",children:[\"\\u274C \",error]}),/*#__PURE__*/_jsx(\"button\",{className:\"retry-btn\",onClick:fetchCalendarLinks,children:\"Try Again\"})]}),downloadStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"success-state\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"success-message\",children:[\"\\u2705 \",downloadStatus]})}),calendarLinks&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-options\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Choose your calendar app:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"calendar-option google\",onClick:()=>handleCalendarAction('google'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"calendar-icon\",children:\"\\uD83D\\uDDD3\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Google Calendar\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Opens in browser\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"calendar-option outlook\",onClick:()=>handleCalendarAction('outlook'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"calendar-icon\",children:\"\\uD83D\\uDCE7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Outlook\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Opens in browser\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"calendar-option apple\",onClick:()=>handleCalendarAction('apple'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"calendar-icon\",children:\"\\uD83C\\uDF4E\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Apple Calendar\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Downloads .ics file\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"calendar-option yahoo\",onClick:()=>handleCalendarAction('yahoo'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"calendar-icon\",children:\"\\uD83D\\uDFE3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Yahoo Calendar\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Opens in browser\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"calendar-option ics\",onClick:()=>handleCalendarAction('ics'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"calendar-icon\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Download .ics file\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Works with most calendar apps\"})]})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar-modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:onClose,children:\"Close\"})})]})});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}