{"ast":null,"code":"import { apiClient } from './apiClient';\n/**\r\n * Calendar service for frontend calendar integration\r\n */\nclass CalendarService {\n  /**\r\n   * Get calendar links for all supported calendar providers\r\n   * @param eventId - Event ID to generate links for\r\n   * @returns Promise with calendar links\r\n   */\n  async getCalendarLinks(eventId) {\n    try {\n      const response = await apiClient.get(`/events/${eventId}/calendar/link`);\n      if (!response.data.success) {\n        throw new Error(response.data.message || 'Failed to generate calendar links');\n      }\n      return response.data.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error fetching calendar links:', error);\n      throw new Error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to generate calendar links');\n    }\n  }\n\n  /**\r\n   * Get calendar link for a specific provider\r\n   * @param eventId - Event ID\r\n   * @param provider - Calendar provider (google, outlook, yahoo, apple, ics)\r\n   * @returns Promise with calendar link\r\n   */\n  async getCalendarLink(eventId, provider) {\n    try {\n      const response = await apiClient.get(`/events/${eventId}/calendar/link?type=${provider}`);\n      if (!response.data.success) {\n        throw new Error(response.data.message || 'Failed to generate calendar link');\n      }\n      return response.data.data.link;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Error fetching calendar link:', error);\n      throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to generate calendar link');\n    }\n  }\n\n  /**\r\n   * Download .ics calendar file for an event\r\n   * @param eventId - Event ID\r\n   * @param eventTitle - Event title for filename\r\n   */\n  async downloadICSFile(eventId, eventTitle) {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL || 'http://localhost:3001/api'}/events/${eventId}/calendar`, {\n        method: 'GET',\n        headers: {\n          'Accept': 'text/calendar'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to download calendar file');\n      }\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n\n      // Create download link\n      const link = document.createElement('a');\n      link.href = url;\n\n      // Generate filename\n      const sanitizedTitle = eventTitle.replace(/[^a-zA-Z0-9\\s-]/g, '').replace(/\\s+/g, '-').toLowerCase().substring(0, 50);\n      const dateStr = new Date().toISOString().split('T')[0];\n      link.download = `${sanitizedTitle}-${dateStr}.ics`;\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      // Clean up\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error downloading .ics file:', error);\n      throw new Error('Failed to download calendar file');\n    }\n  }\n\n  /**\r\n   * Open calendar provider in new tab\r\n   * @param url - Calendar provider URL\r\n   */\n  openCalendarProvider(url) {\n    window.open(url, '_blank', 'noopener,noreferrer');\n  }\n\n  /**\r\n   * Check if calendar integration is supported\r\n   * @returns boolean indicating support\r\n   */\n  isCalendarIntegrationSupported() {\n    // Check if we're in a browser environment\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\n  }\n\n  /**\r\n   * Get user's preferred calendar provider from localStorage\r\n   * @returns string with preferred provider or null\r\n   */\n  getPreferredCalendarProvider() {\n    if (!this.isCalendarIntegrationSupported()) return null;\n    try {\n      return localStorage.getItem('preferredCalendarProvider');\n    } catch (error) {\n      console.warn('Failed to get preferred calendar provider from localStorage');\n      return null;\n    }\n  }\n\n  /**\r\n   * Set user's preferred calendar provider in localStorage\r\n   * @param provider - Calendar provider to set as preferred\r\n   */\n  setPreferredCalendarProvider(provider) {\n    if (!this.isCalendarIntegrationSupported()) return;\n    try {\n      localStorage.setItem('preferredCalendarProvider', provider);\n    } catch (error) {\n      console.warn('Failed to save preferred calendar provider to localStorage');\n    }\n  }\n\n  /**\r\n   * Quick add to preferred calendar provider\r\n   * @param eventId - Event ID\r\n   * @returns Promise that resolves when calendar action is complete\r\n   */\n  async quickAddToCalendar(eventId) {\n    const preferredProvider = this.getPreferredCalendarProvider();\n    if (!preferredProvider) {\n      throw new Error('No preferred calendar provider set');\n    }\n    try {\n      const link = await this.getCalendarLink(eventId, preferredProvider);\n      if (preferredProvider === 'ics' || preferredProvider === 'apple') {\n        // For .ics files, trigger download\n        const response = await fetch(link);\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const downloadLink = document.createElement('a');\n        downloadLink.href = url;\n        downloadLink.download = `event-${eventId}.ics`;\n        document.body.appendChild(downloadLink);\n        downloadLink.click();\n        document.body.removeChild(downloadLink);\n        window.URL.revokeObjectURL(url);\n      } else {\n        // For web-based calendars, open in new tab\n        this.openCalendarProvider(link);\n      }\n    } catch (error) {\n      console.error('Error in quick add to calendar:', error);\n      throw new Error('Failed to add event to calendar');\n    }\n  }\n}\n\n// Export singleton instance\nexport const calendarService = new CalendarService();","map":{"version":3,"names":["apiClient","CalendarService","getCalendarLinks","eventId","response","get","data","success","Error","message","error","_error$response","_error$response$data","console","getCalendarLink","provider","link","_error$response2","_error$response2$data","downloadICSFile","eventTitle","fetch","process","env","REACT_APP_API_BASE_URL","method","headers","ok","blob","url","window","URL","createObjectURL","document","createElement","href","sanitizedTitle","replace","toLowerCase","substring","dateStr","Date","toISOString","split","download","body","appendChild","click","removeChild","revokeObjectURL","openCalendarProvider","open","isCalendarIntegrationSupported","getPreferredCalendarProvider","localStorage","getItem","warn","setPreferredCalendarProvider","setItem","quickAddToCalendar","preferredProvider","downloadLink","calendarService"],"sources":["C:/Users/priya/OneDrive - UW/Hackathons/auDubhacks25/dubhacks/src/services/calendarService.ts"],"sourcesContent":["import { apiClient } from './apiClient';\r\n\r\ninterface CalendarLinks {\r\n  ics: string;\r\n  google: string;\r\n  outlook: string;\r\n  yahoo: string;\r\n  apple: string;\r\n}\r\n\r\ninterface CalendarLinkResponse {\r\n  success: boolean;\r\n  data: CalendarLinks;\r\n  message: string;\r\n}\r\n\r\n/**\r\n * Calendar service for frontend calendar integration\r\n */\r\nclass CalendarService {\r\n  \r\n  /**\r\n   * Get calendar links for all supported calendar providers\r\n   * @param eventId - Event ID to generate links for\r\n   * @returns Promise with calendar links\r\n   */\r\n  async getCalendarLinks(eventId: string): Promise<CalendarLinks> {\r\n    try {\r\n      const response = await apiClient.get<CalendarLinkResponse>(`/events/${eventId}/calendar/link`);\r\n      \r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message || 'Failed to generate calendar links');\r\n      }\r\n      \r\n      return response.data.data;\r\n    } catch (error: any) {\r\n      console.error('Error fetching calendar links:', error);\r\n      throw new Error(error.response?.data?.message || 'Failed to generate calendar links');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get calendar link for a specific provider\r\n   * @param eventId - Event ID\r\n   * @param provider - Calendar provider (google, outlook, yahoo, apple, ics)\r\n   * @returns Promise with calendar link\r\n   */\r\n  async getCalendarLink(eventId: string, provider: string): Promise<string> {\r\n    try {\r\n      const response = await apiClient.get<{ success: boolean; data: { link: string; type: string }; message: string }>(\r\n        `/events/${eventId}/calendar/link?type=${provider}`\r\n      );\r\n      \r\n      if (!response.data.success) {\r\n        throw new Error(response.data.message || 'Failed to generate calendar link');\r\n      }\r\n      \r\n      return response.data.data.link;\r\n    } catch (error: any) {\r\n      console.error('Error fetching calendar link:', error);\r\n      throw new Error(error.response?.data?.message || 'Failed to generate calendar link');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Download .ics calendar file for an event\r\n   * @param eventId - Event ID\r\n   * @param eventTitle - Event title for filename\r\n   */\r\n  async downloadICSFile(eventId: string, eventTitle: string): Promise<void> {\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL || 'http://localhost:3001/api'}/events/${eventId}/calendar`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'text/calendar',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to download calendar file');\r\n      }\r\n\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      \r\n      // Create download link\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      \r\n      // Generate filename\r\n      const sanitizedTitle = eventTitle\r\n        .replace(/[^a-zA-Z0-9\\s-]/g, '')\r\n        .replace(/\\s+/g, '-')\r\n        .toLowerCase()\r\n        .substring(0, 50);\r\n      \r\n      const dateStr = new Date().toISOString().split('T')[0];\r\n      link.download = `${sanitizedTitle}-${dateStr}.ics`;\r\n      \r\n      // Trigger download\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      \r\n      // Clean up\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (error: any) {\r\n      console.error('Error downloading .ics file:', error);\r\n      throw new Error('Failed to download calendar file');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open calendar provider in new tab\r\n   * @param url - Calendar provider URL\r\n   */\r\n  openCalendarProvider(url: string): void {\r\n    window.open(url, '_blank', 'noopener,noreferrer');\r\n  }\r\n\r\n  /**\r\n   * Check if calendar integration is supported\r\n   * @returns boolean indicating support\r\n   */\r\n  isCalendarIntegrationSupported(): boolean {\r\n    // Check if we're in a browser environment\r\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\r\n  }\r\n\r\n  /**\r\n   * Get user's preferred calendar provider from localStorage\r\n   * @returns string with preferred provider or null\r\n   */\r\n  getPreferredCalendarProvider(): string | null {\r\n    if (!this.isCalendarIntegrationSupported()) return null;\r\n    \r\n    try {\r\n      return localStorage.getItem('preferredCalendarProvider');\r\n    } catch (error) {\r\n      console.warn('Failed to get preferred calendar provider from localStorage');\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set user's preferred calendar provider in localStorage\r\n   * @param provider - Calendar provider to set as preferred\r\n   */\r\n  setPreferredCalendarProvider(provider: string): void {\r\n    if (!this.isCalendarIntegrationSupported()) return;\r\n    \r\n    try {\r\n      localStorage.setItem('preferredCalendarProvider', provider);\r\n    } catch (error) {\r\n      console.warn('Failed to save preferred calendar provider to localStorage');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Quick add to preferred calendar provider\r\n   * @param eventId - Event ID\r\n   * @returns Promise that resolves when calendar action is complete\r\n   */\r\n  async quickAddToCalendar(eventId: string): Promise<void> {\r\n    const preferredProvider = this.getPreferredCalendarProvider();\r\n    \r\n    if (!preferredProvider) {\r\n      throw new Error('No preferred calendar provider set');\r\n    }\r\n\r\n    try {\r\n      const link = await this.getCalendarLink(eventId, preferredProvider);\r\n      \r\n      if (preferredProvider === 'ics' || preferredProvider === 'apple') {\r\n        // For .ics files, trigger download\r\n        const response = await fetch(link);\r\n        const blob = await response.blob();\r\n        const url = window.URL.createObjectURL(blob);\r\n        \r\n        const downloadLink = document.createElement('a');\r\n        downloadLink.href = url;\r\n        downloadLink.download = `event-${eventId}.ics`;\r\n        document.body.appendChild(downloadLink);\r\n        downloadLink.click();\r\n        document.body.removeChild(downloadLink);\r\n        \r\n        window.URL.revokeObjectURL(url);\r\n      } else {\r\n        // For web-based calendars, open in new tab\r\n        this.openCalendarProvider(link);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error in quick add to calendar:', error);\r\n      throw new Error('Failed to add event to calendar');\r\n    }\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const calendarService = new CalendarService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}